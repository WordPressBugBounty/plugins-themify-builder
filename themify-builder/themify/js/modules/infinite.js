((t,e,l,o)=>{"use strict";let i=null;const n=new Set,a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=t=>t.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop,f=t=>new IntersectionObserver(((e,l)=>{for(let o=e.length-1;o>-1;--o)!0===e[o].isIntersecting&&(null===t.button?l.disconnect():u(t))}),{threshold:.1}),s=(t,l=location.href)=>{null===i&&(i=new IntersectionObserver((t=>{for(let l=t.length-1;l>-1;--l)if(!0===t[l].isIntersecting){let o=t[l].target.dataset.tfHistory,i=location.hash;i&&"#"!==i&&(o+=i),e.history.replaceState(null,null,o);break}}),{rootMargin:"100% 0px -100% 0px"}));const o=new URL(l,location);t.dataset.tfHistory=c(o.href.replace(o.hash,"")),i.observe(t)},c=e=>t.updateQueryString("tf-scroll",null,e),d=e=>t.updateQueryString("tf-scroll",1,e),u=i=>{if(!0===i.isWorking)return;i.isWorking=!0,i.status.classList.add("tf_scroll_request");let f,u,_="GET";if(i.filter){const t=i.filter.hasAttribute("data-sort"),e=i.filter.querySelector(".cat-item.active");if(e){i.ajax_loading=e;const l=i.filter.dataset;if(u={action:"themify_ajax_load_more",module:l.el,id:l.id,page:e.dataset.p,post_type:l.post_type,taxonomy:l.taxonomy},!e.classList.contains("cat-item-all")){const t=e.className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,"").replace(" ","");u.tax=t.trim()}if(t){const t=i.filter.querySelector(".tf_ajax_sort_order.active"),e=i.filter.querySelector(".tf_ajax_sort_order_by .active");t&&(u.order=t.dataset.type),e&&(u.orderby=e.dataset.orderBy)}_="POST",f=themify_vars.ajax_url}}i.ajax_loading||(f=d(i.button.href)),t.fetch(u,"html",{method:_},f).then((f=>{const u=f.querySelector(i.id),_=c(i.button.href),m=i.container;let h,p=null;if(null!==u){((l,o,i)=>{if(t.lazyScroll(t.selectWithParent("[data-lazy]",l),!0),!i){const o=e.Isotope?.data(l);if(o){const e=l.previousElementSibling;if(e?.classList.contains("post-filter")){const l=e.querySelector(".cat-item.active:not(.cat-item-all)");null!==l&&t.triggerEvent(t.click,l)}}}t.triggerEvent(l,"infinitebeforeloaded",{d:o}).trigger("infinitebeforeloaded",[l,o])})(m,f,!!i.ajax_loading);const n=l.createDocumentFragment(),c=t.convert(u.children);if(p=u.tfClass("load-more-button")[0]||u.nextElementSibling,p&&(p.classList.contains("load-more-button")||(p=p.children[0]),p?.classList.contains("load-more-button")||(p=null)),p&&"A"!==p.tagName&&(p=p.children[0],p&&"A"===p.tagName||(p=null)),c[0]!==o){for(let t=0;t<c.length;++t)n.appendChild(c[t]);m.appendChild(n),i.history&&(h=!0,s(c[0],_)),((o,i,n)=>{const f=o.length,s=e.Isotope?.data(i);o[0].className+=" tf_firstitem";var c=0;for(let e=0;e<f;++e)o[e].style.opacity=0,t.imagesLoad(o[e]).then((e=>{if(a){const t=e.querySelector("img[srcset]");null!==t&&(t.outerHTML=t.outerHTML)}if(++c,s?.appended(e),e.style.opacity="",c===f){if(s||i.classList.contains("auto_tiles")){if(!n.ajax_loading){const e=i.previousElementSibling;e?.classList.contains("post-filter")&&t.trigger("themify_isotop_filter",[e])}i.classList.contains("auto_tiles")&&t.autoTiles(i)}for(let e=0;e<f;++e)t.lazyScroll(t.convert(t.selectWithParent("[data-lazy]",o[e])).reverse(),!0);if(t.triggerEvent(i,"infiniteloaded",{items:o}).trigger("infiniteloaded",[i,o]),"scroll"===n.scrollToNewOnLoad){let e=i.tfClass("tf_firstitem");e=e[e.length-1];let o=r(e);const a=o>=800?800+Math.abs(o/10):800,f=l.tfId("headerwrap");null!==f&&(f.classList.contains("fixed-header")||l.body.classList.contains("fixed-header"))&&(o-=f.offsetHeight),(!1===n.scrollThreshold||o-l.docElement.scrollTop>n.scrollThreshold)&&t.scrollTo(o,a)}t.fonts(),t.wpEmbed(l.tfClass("wp-embedded-content")),t.largeImages()}}))})(c,m,i)}else p=null;i.ajax_loading&&null===p&&(i.ajax_loading.dataset.done=!0,i.filter.parentNode.classList.add("tb_hide_loadmore"))}if(i.ajax_loading)i.ajax_loading.dataset.p=1+~~i.ajax_loading.dataset.p,i.isWorking=null;else{if(null===p)i.button.remove(),i.button=null;else{const t=d(p.href);i.prefetchBtn===o||n.has(t)||(n.add(t),i.prefetchBtn.setAttribute("href",t)),i.button.href=t,e.tfOn("scroll",(()=>{i.isWorking=null}),{passive:!0,once:!0})}if(e.ga!==o){const t=l.createElement("a");t.href=_,ga("set","page",t.pathname),ga("send","pageview")}!h&&i.history&&e.history.replaceState(null,null,_)}return i.status.classList.remove("tf_scroll_request"),u})).catch((t=>{console.warn("InfiniteScroll error.",t)}))};t.on("tf_infinite_init",((i,a)=>{const r=i.length!==o?i:[i];for(let o=r.length-1;o>-1;--o){let i=r[o],c=i.tfClass("load-more-button")[0]||i.nextElementSibling,_=l.createElement("div");if(c){let o=c;if(!c.classList.contains("load-more-button")&&(c=c.children[0],!c?.classList.contains("load-more-button")))continue;if("A"!==c.tagName&&(c=c.children[0],!c||"A"!==c.tagName))continue;if(a.id||(a.id=i.id,a.id=a.id?"#"+a.id:"."+i.className.split(" ").join(".")),_.className="tf_load_status tf_loader tf_clear tf_hide",i.after(_),a.status=_,a.button=c,a.container=i,i.classList.contains("tb_ajax_pagination")){const t=i.previousElementSibling;t?.classList.contains("post-filter")&&(a.filter=t)}!1!==a.scrollThreshold?e.tfOn("scroll",(()=>{const t=l.createElement("link"),e=d(a.button.getAttribute("href"));t.setAttribute("as","document"),t.rel="prefetch",t.href=e,a.button.after(t),a.prefetchBtn=t,n.add(e),s(a.container.children[0]),f(a).observe(o)}),{passive:!0,once:!0}):(s(i.children[0]),c.tfOn(t.click,(t=>{t.preventDefault(),delete a.ajax_loading,u(a)})).style.display="inline-block")}}})).loadCss("infinite","tf_infinite")})(Themify,window,document,void 0);
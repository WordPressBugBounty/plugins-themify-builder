((t,i,a,e)=>{"use strict";const s=t.click,_=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),f=t=>{const i=new Date(1e3*(t=1/0===t?0:t)).toISOString().substr(11,8).split(":");return"00"===i[0]&&i.splice(0,1),i.join(":")},l=(a,_)=>{const l=a.tracks,n=!!a.artists,o=!!a.images,p=!!a.tracknumbers,d=i.createElement("div"),u=i.createElement("div"),c=i.createDocumentFragment();u.className="tf_audio_playlist",d.className="tf_playlist_current";let r=!0;for(let t=0;t<l.length;++t)if(l[t].src){let a=l[t],e=i.createElement("div"),s=i.createElement("div"),_=i.createElement("a"),o=i.createElement("span"),d=new Audio(a.src.trim());if(!a.type||d.canPlayType(a.type)){if(e.className="tf_playlist_item tf_w tf_rel",_.href=a.src.trim(),_.className="tf_playlist_caption tf_w",s.className="tf_playlist_length",!isNaN(d.duration)||a.meta?.length_formatted?(s.textContent=isNaN(d.duration)?a.meta.length_formatted:f(d.duration),d=null):(e.className+=" tf_lazy",d.tfOn("durationchange",(function(){s.textContent=f(this.duration),d=null,e.classList.remove("tf_lazy")}),{passive:!0,once:!0})),!0===p&&(_.textContent=t+1+"."),o.className="tf_playlist_title",a.caption?o.textContent=a.caption:a.title&&(o.textContent=a.title),!0===n&&a.meta?.artists){let t=i.createElement("span");t.className="tf_playlist_artist",t.textContent="-"+a.meta.artists,_.appendChild(t)}_.appendChild(o),e.append(_,s),c.appendChild(e)}else l.splice(t,1)}else l.splice(t,1);return u.tfOn(s,(function(a){const s=a.target.closest(".tf_playlist_caption"),f=s.parentNode.classList.contains("tf_audio_current");if(s){if(a.preventDefault(),a.stopPropagation(),!f||_.paused)if(f)_.play();else{const a=this.tfClass("tf_audio_current")[0],f=t.convert(this.children).indexOf(s.parentNode),p=i.createElement("div"),u=i.createElement("span"),c=l[f];if(p.className="tf_playlist_caption",u.className="tf_playlist_title",!1===r&&(_.pause(),_.tfOn("canplay",(function(){this.play()}),{passive:!0,once:!0}).src=s.getAttribute("href"),_.load()),a?.classList.remove("tf_audio_current"),s.parentNode.classList.add("tf_audio_current"),d.innerHTML="",c){if(o&&c.thumb&&c.thumb.src){const t=new Image,a=i.createElement("div");c.thumb.width!==e&&(t.width=c.thumb.width),c.thumb.height!==e&&(t.height=c.thumb.height),t.decoding="async",t.src=c.thumb.src,a.className="post-image",a.appendChild(t),d.appendChild(a)}if(u.textContent=c.title??c.caption??"",p.appendChild(u),l.meta){if(l.meta.album){const t=i.createElement("span");t.className=" tf_playlist_album",t.textContent=l.meta.album,p.appendChild(t)}if(n&&l.meta.artists){const t=i.createElement("span");t.className=" tf_playlist_artist",t.textContent=l.meta.artists,p.appendChild(t)}}d.appendChild(p)}}r=!1}})),u.appendChild(c),_.before(d),t.triggerEvent(u.tfClass("tf_playlist_caption")[0],s),u},n=async(t,i)=>{if(t.paused){t.dataset.playing||(t.dataset.playing=1);try{await t.play()}catch(t){if(i)throw t}}},o=(e,o)=>{if(e.previousElementSibling?.classList.contains("tf_audio_container"))return;const p=i.createElement("div"),d=i.createElement("div"),u=i.createElement("div"),c=i.createElement("div"),r=i.createElement("div"),v=i.createElement("div"),y=i.createElement("input"),h=i.createElement("input"),b=i.createElement("div"),m=i.createElement("div"),w=i.createElement("div"),g=i.createElement("button"),N=i.createElement("button"),k=i.createElement("span"),x=i.createElement("div"),z=e.parentNode.closest(".track"),P=i.createElement("div"),X=o&&o.tracks,q=e.parentNode.dataset,A=z?.tfClass("track-title")[0];let F=!0,I=!1;if(p.className="tf_audio_container tf_w tf_rel tf_box",d.className="tf_audio_wrap tf_w tf_rel tf_box",w.className="tf_audio_controls",u.className="tf_audio_progress_wrap tf_rel tf_textl",c.className="tf_audio_progress_loaded tf_w tf_h tf_abs",r.className="tf_audio_progress_current tf_w tf_h tf_abs",y.className="tf_audio_progress_range tf_h tf_abs",y.title=q.timeslider,y.setAttribute("aria-label",q.timeslider),h.min=y.min=0,h.max=y.max=100,h.type=y.type="range",y.value=0,h.value="50%",b.className="tf_audio_volumn_wrap",m.className="tf_audio_volumn_inner",h.className="tf_audio_volumn_range tf_h tf_overflow",g.className="tf_audio_mute",N.className="tf_auido_play",N.title=q.playtitle,N.setAttribute("aria-label",q.playtitle),N.tabIndex=g.tabIndex=0,N.type=g.type="button",k.className="screen-reader-text",k.textContent=q.playtitle,N.appendChild(k),e.muted&&(g.className+=" tf_muted"),x.className="tf_audio_current_time",P.className="tf_audio_total_time",v.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc",x.textContent=f(e.currentTime),P.textContent=f(e.duration),N.tfOn(s,(t=>{"click"===t.type&&(t.preventDefault(),t.stopPropagation()),e.paused?n(e):e.pause()}),{passive:"click"!==s}),A&&(A.href="#/",A.tfOn(s,(i=>{i.preventDefault(),t.triggerEvent(N,s)}))),g.tfOn(s,(t=>{"click"===t.type&&(t.preventDefault(),t.stopPropagation()),e.muted=!e.muted}),{passive:"click"!==s}),t.isTouch||u.tfOn("mouseenter",(function(){if(!isNaN(e.duration)){v.classList.remove("tf_hide");const i=this.clientWidth,s=a(v.clientWidth/2),_=e.duration,l=e=>{const l=e.layerX??e.offsetX,n=t.isRTL?l+s:l-s;n>0&&l>=0&&l<=i&&(v.style.transform="translateX("+n+"px)",!1===I&&(v.textContent=f(a(l/i)*_)))};this.tfOn("mouseleave",(function(){v.classList.add("tf_hide"),this.tfOff("mousemove",l,{passive:!0})}),{passive:!0,once:!0}).tfOn("mousemove",l,{passive:!0})}}),{passive:!0}),y.tfOn("input",(function(t){if(t.preventDefault(),t.stopPropagation(),!isNaN(e.duration)){e.paused||!0!==F||e.pause(),I=!0;const t=parseInt(this.value);e.currentTime=100===t?e.duration-1:a(t*e.duration/100).toFixed(4)}})).tfOn("change",(t=>{t.preventDefault(),t.stopPropagation(),isNaN(e.duration)||(I=F=!1,e.paused&&e.play().catch({}).finally((()=>{F=!0})))})),e.tfOn("progress",(function(){this.buffered.length>0&&(c.style.transform="scaleX("+a(this.buffered.end(0)/this.duration).toFixed(4)+")")}),{passive:!0}).tfOn("durationchange",(function(){P.textContent=f(this.duration)}),{passive:!0}).tfOn("waiting emptied",(function(){u.classList.add("tf_audio_waiting"),this.tfOn("playing",(()=>{u.classList.remove("tf_audio_waiting")}),{passive:!0,once:!0})}),{passive:!0}).tfOn("pause",(()=>{N.classList.remove("tf_audio_playing")}),{passive:!0}).tfOn("play",(function(){N.classList.add("tf_audio_playing");for(let t=i.tfTag("audio"),a=t.length-1;a>-1;--a)t[a]!==this&&t[a].pause()}),{passive:!0}).tfOn("timeupdate",(function(){if(!isNaN(this.duration)){x.textContent=f(this.currentTime);let t=a(this.currentTime/this.duration);r.style.transform="scaleX("+t.toFixed(4)+")",!1===I&&(y.value=~~(100*t))}}),{passive:!0}).tfOn("volumechange",(function(){const t=g.classList;0!==this.volume&&t.remove("tf_mute_disabled"),!0===this.muted||0===this.volume?(0===this.volume&&t.add("tf_mute_disabled"),t.add("tf_muted")):t.remove("tf_muted")}),{passive:!0}),u.append(c,r,y,v),b.appendChild(g),!1===_&&(h.tfOn("input",(function(t){t.preventDefault(),t.stopPropagation(),e.volume=a(this.value/100).toFixed(3)})),m.appendChild(h),b.appendChild(m)),d.append(w,x,u,P,b),p.appendChild(d),X){const a=p.appendChild(l(o,e)),_=i.createElement("button"),f=i.createElement("span"),n=i.createElement("button"),d=i.createElement("span");_.className="tf_playlist_prev tf_play_disabled",f.className=d.className="screen-reader-text",f.textContent=q.prev,_.appendChild(f),n.className="tf_playlist_next",d.textContent=q.next,n.appendChild(d),_.setAttribute("aria-label",q.prev),n.setAttribute("aria-label",q.next),a.children.length<=1&&(n.className+=" tf_play_disabled"),_.tabIndex=n.tabIndex=0,_.type=n.type="button",w.tfOn(s,(i=>{const e=i.target.classList;if(!e.contains("tf_play_disabled")&&(e.contains("tf_playlist_prev")||e.contains("tf_playlist_next"))){"click"===i.type&&(i.preventDefault(),i.stopPropagation());const f=a.tfClass("tf_audio_current")[0];if(f){const i=e.contains("tf_playlist_prev")?f.previousElementSibling:f.nextElementSibling;i&&(t.triggerEvent(i.tfClass("tf_playlist_caption")[0],s),e.contains("tf_playlist_prev")?(n.classList.remove("tf_play_disabled"),e.toggle("tf_play_disabled",!i.previousElementSibling)):(_.classList.remove("tf_play_disabled"),e.toggle("tf_play_disabled",!i.nextElementSibling)))}}}),{passive:"click"!==s}),e.tfOn("ended",(function(){if(n.classList.contains("tf_play_disabled")){if(this.hasAttribute("data-loop")||this.hasAttribute("loop")){const i=a.tfClass("tf_playlist_caption")[0];i&&(_.classList.add("tf_play_disabled"),n.classList.toggle("tf_play_disabled",a.children.length<=1),t.triggerEvent(i,s))}}else t.triggerEvent(n,s)}),{passive:!0}),w.append(_,N,n)}else w.appendChild(N);requestAnimationFrame((()=>{e.parentNode.classList.remove("tf_lazy"),e.before(p),e.closest(".tf_lazy")?.classList.remove("tf_lazy"),e.dataset.autoplay&&n(e)}))},p=(i,a)=>{for(let e=i.length-1;e>-1;--e){let s=i[e];if(!a){let t=s.parentNode.parentNode;if(t.classList.contains("wp-audio-playlist")){let i=t.tfClass("tf-playlist-script")[0]||t.tfClass("wp-playlist-script")[0];i&&"audio"!==(a=JSON.parse(i.textContent)).type&&(a=!1)}}if(!s.hasAttribute("src")&&!s.tfTag("source")[0]){if(!a?.tracks)continue;let t;for(let i=0;i<a.tracks.length;++i)if(t=a.tracks[i].src,t)break;if(!t)continue;s.src=t}4===s.readyState?o(s,a):t.requestIdleCallback((()=>{s.tfOn("loadedmetadata",(function(){o(this,a)}),{passive:!0,once:!0}).load()}),-1,200)}};t.on("tf_audio_init",((t,i)=>{queueMicrotask((()=>{setTimeout((()=>{p(t,i)}),0)}))}))})(Themify,document,parseFloat,void 0);